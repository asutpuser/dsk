!function(){function t(t,e){"use strict";var n={version:"2.1.4",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};n.chartRegistry=function(){function t(t){return t||(t=n.constants.DEFAULT_CHART_GROUP),e[t]||(e[t]=[]),t}var e={};return{has:function(t){for(var n in e)if(e[n].indexOf(t)>=0)return!0;return!1},register:function(n,r){r=t(r),e[r].push(n)},deregister:function(n,r){r=t(r);for(var i=0;i<e[r].length;i++)if(e[r][i].anchorName()===n.anchorName()){e[r].splice(i,1);break}},clear:function(t){t?delete e[t]:e={}},list:function(n){return n=t(n),e[n]}}}(),n.registerChart=function(t,e){n.chartRegistry.register(t,e)},n.deregisterChart=function(t,e){n.chartRegistry.deregister(t,e)},n.hasChart=function(t){return n.chartRegistry.has(t)},n.deregisterAllCharts=function(t){n.chartRegistry.clear(t)},n.filterAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].filterAll()},n.refocusAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].focus&&e[r].focus()},n.renderAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].render();null!==n._renderlet&&n._renderlet(t)},n.redrawAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].redraw();null!==n._renderlet&&n._renderlet(t)},n.disableTransitions=!1,n.transition=function(t,e,r,i){if(n.disableTransitions||e<=0)return t;var a=t.transition(i);return(e>=0||void 0!==e)&&(a=a.duration(e)),(r>=0||void 0!==r)&&(a=a.delay(r)),a},n.optionalTransition=function(t,e,r,i){return t?function(t){return n.transition(t,e,r,i)}:function(t){return t}},n.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each(function(){++n}).each("end",function(){--n||e.call(t)})}},n.units={},n.units.integers=function(t,e){return Math.abs(e-t)},n.units.ordinal=function(t,e,n){return n},n.units.fp={},n.units.fp.precision=function(t){var e=function(t,r){var i=Math.abs((r-t)/e.resolution);return n.utils.isNegligible(i-Math.floor(i))?Math.floor(i):Math.ceil(i)};return e.resolution=t,e},n.round={},n.round.floor=function(t){return Math.floor(t)},n.round.ceil=function(t){return Math.ceil(t)},n.round.round=function(t){return Math.round(t)},n.override=function(t,e,n){var r=t[e];t["_"+e]=r,t[e]=n},n.renderlet=function(t){return arguments.length?(n._renderlet=t,n):n._renderlet},n.instanceOfChart=function(t){return t instanceof Object&&t.__dcFlag__&&!0},n.errors={},n.errors.Exception=function(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack},n.errors.Exception.prototype=Object.create(Error.prototype),n.errors.Exception.prototype.constructor=n.errors.Exception,n.errors.InvalidStateException=function(){n.errors.Exception.apply(this,arguments)},n.errors.InvalidStateException.prototype=Object.create(n.errors.Exception.prototype),n.errors.InvalidStateException.prototype.constructor=n.errors.InvalidStateException,n.errors.BadArgumentException=function(){n.errors.Exception.apply(this,arguments)},n.errors.BadArgumentException.prototype=Object.create(n.errors.Exception.prototype),n.errors.BadArgumentException.prototype.constructor=n.errors.BadArgumentException,n.dateFormat=t.time.format("%m/%d/%Y"),n.printers={},n.printers.filters=function(t){for(var e="",r=0;r<t.length;++r)r>0&&(e+=", "),e+=n.printers.filter(t[r]);return e},n.printers.filter=function(t){var e="";return void 0!==t&&null!==t&&(t instanceof Array?t.length>=2?e="["+n.utils.printSingleValue(t[0])+" -> "+n.utils.printSingleValue(t[1])+"]":t.length>=1&&(e=n.utils.printSingleValue(t[0])):e=n.utils.printSingleValue(t)),e},n.pluck=function(t,e){return e?function(n,r){return e.call(n,n[t],r)}:function(e){return e[t]}},n.utils={},n.utils.printSingleValue=function(t){var e=""+t;return t instanceof Date?e=n.dateFormat(t):"string"==typeof t?e=t:n.utils.isFloat(t)?e=n.utils.printSingleValue.fformat(t):n.utils.isInteger(t)&&(e=Math.round(t)),e},n.utils.printSingleValue.fformat=t.format(".2f"),n.utils.add=function(e,n,r){if("string"==typeof n&&(n=n.replace("%","")),e instanceof Date)return"string"==typeof n&&(n=+n),"millis"===r?new Date(e.getTime()+n):(r=r||"day",t.time[r].offset(e,n));if("string"==typeof n){var i=+n/100;return e>0?e*(1+i):e*(1-i)}return e+n},n.utils.subtract=function(e,n,r){if("string"==typeof n&&(n=n.replace("%","")),e instanceof Date)return"string"==typeof n&&(n=+n),"millis"===r?new Date(e.getTime()-n):(r=r||"day",t.time[r].offset(e,-n));if("string"==typeof n){var i=+n/100;return e<0?e*(1+i):e*(1-i)}return e-n},n.utils.isNumber=function(t){return t===+t},n.utils.isFloat=function(t){return t===+t&&t!==(0|t)},n.utils.isInteger=function(t){return t===+t&&t===(0|t)},n.utils.isNegligible=function(t){return!n.utils.isNumber(t)||t<n.constants.NEGLIGIBLE_NUMBER&&t>-n.constants.NEGLIGIBLE_NUMBER},n.utils.clamp=function(t,e,n){return t<e?e:t>n?n:t};var r=0;return n.utils.uniqueId=function(){return++r},n.utils.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},n.utils.appendOrSelect=function(t,e,n){n=n||e;var r=t.select(e);return r.empty()&&(r=t.append(n)),r},n.utils.safeNumber=function(t){return n.utils.isNumber(+t)?+t:0},n.logger={},n.logger.enableDebugLog=!1,n.logger.warn=function(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),n.logger},n.logger.debug=function(t){return n.logger.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),n.logger},n.logger.deprecate=function(t,e){var r=!1;return function(){return r||(n.logger.warn(e),r=!0),t.apply(this,arguments)}},n.events={current:null},n.events.trigger=function(t,e){e?(n.events.current=t,setTimeout(function(){t===n.events.current&&t()},e)):t()},n.filters={},n.filters.RangedFilter=function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},n.filters.TwoDimensionalFilter=function(t){if(null===t)return null;var e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},n.filters.RangedTwoDimensionalFilter=function(t){if(null===t)return null;var e,n=t;return e=n[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],n.isFiltered=function(t){var n,r;return t instanceof Array?(n=t[0],r=t[1]):(n=t,r=e[0][1]),n>=e[0][0]&&n<e[1][0]&&r>=e[0][1]&&r<e[1][1]},n.filterType="RangedTwoDimensionalFilter",n},n.baseMixin=function(r){function i(){f&&f.attr("width",r.width()).attr("height",r.height())}function a(){return f=r.root().append("svg"),i(),f}function o(t){if(!r[t]||!r[t]())throw new n.errors.InvalidStateException("Mandatory attribute chart."+t+" is missing on chart[#"+r.anchorName()+"]")}function l(t){if(r.dimension()&&r.dimension().filter){var e=Y(r.dimension(),t);e&&(t=e)}return t}r.__dcFlag__=n.utils.uniqueId();var u,s,c,d,f,g,h,p,x,y,m,v=200,A=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>v?e:v},b=A,_=200,D=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>_?e:_},k=D,C=n.pluck("key"),L=n.pluck("value"),R=n.pluck("key"),M=n.pluck("key"),S=!1,w=function(t){return r.keyAccessor()(t)+": "+r.valueAccessor()(t)},E=!0,B=!1,O=750,T=0,F=n.printers.filters,N=["dimension","group"],G=n.constants.DEFAULT_CHART_GROUP,H=t.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),P=[],Y=function(t,e){return 0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction(function(t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isFiltered&&r.isFiltered(t))return!0;if(r<=t&&r>=t)return!0}return!1}):t.filterExact(e[0]),e},U=function(t){return t.all()};r.height=function(e){return arguments.length?(k=t.functor(e||D),p=void 0,r):(n.utils.isNumber(p)||(p=k(d.node())),p)},r.width=function(e){return arguments.length?(b=t.functor(e||A),h=void 0,r):(n.utils.isNumber(h)||(h=b(d.node())),h)},r.minWidth=function(t){return arguments.length?(v=t,r):v},r.minHeight=function(t){return arguments.length?(_=t,r):_},r.dimension=function(t){return arguments.length?(u=t,r.expireCache(),r):u},r.data=function(e){return arguments.length?(U=t.functor(e),r.expireCache(),r):U.call(r,s)},r.group=function(t,e){return arguments.length?(s=t,r._groupName=e,r.expireCache(),r):s},r.ordering=function(t){return arguments.length?(M=t,x=e.quicksort.by(M),r.expireCache(),r):M},r._computeOrderedGroups=function(t){var n=t.slice(0);return n.length<=1?n:(x||(x=e.quicksort.by(M)),x(n,0,n.length))},r.filterAll=function(){return r.filter(null)},r.select=function(t){return d.select(t)},r.selectAll=function(t){return d?d.selectAll(t):null},r.anchor=function(e,i){if(!arguments.length)return c;if(n.instanceOfChart(e))c=e.anchor(),d=e.root(),g=!0;else{if(!e)throw new n.errors.BadArgumentException("parent must be defined");c=e.select&&e.classed?e.node():e,(d=t.select(c)).classed(n.constants.CHART_CLASS,!0),n.registerChart(r,i),g=!1}return G=i,r},r.anchorName=function(){var t=r.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart"+r.chartID()},r.root=function(t){return arguments.length?(d=t,r):d},r.svg=function(t){return arguments.length?(f=t,r):f},r.resetSvg=function(){return r.select("svg").remove(),a()},r.filterPrinter=function(t){return arguments.length?(F=t,r):F},r.controlsUseVisibility=function(t){return arguments.length?(B=t,r):B},r.turnOnControls=function(){if(d){var t=r.controlsUseVisibility()?"visibility":"display";r.selectAll(".reset").style(t,null),r.selectAll(".filter").text(F(r.filters())).style(t,null)}return r},r.turnOffControls=function(){if(d){var t=r.controlsUseVisibility()?"visibility":"display",e=r.controlsUseVisibility()?"hidden":"none";r.selectAll(".reset").style(t,e),r.selectAll(".filter").style(t,e).text(r.filter())}return r},r.transitionDuration=function(t){return arguments.length?(O=t,r):O},r.transitionDelay=function(t){return arguments.length?(T=t,r):T},r._mandatoryAttributes=function(t){return arguments.length?(N=t,r):N},r.render=function(){p=h=void 0,H.preRender(r),N&&N.forEach(o);var t=r._doRender();return y&&y.render(),r._activateRenderlets("postRender"),t},r._activateRenderlets=function(t){H.pretransition(r),r.transitionDuration()>0&&f?f.transition().duration(r.transitionDuration()).delay(r.transitionDelay()).each("end",function(){H.renderlet(r),t&&H[t](r)}):(H.renderlet(r),t&&H[t](r))},r.redraw=function(){i(),H.preRedraw(r);var t=r._doRedraw();return y&&y.render(),r._activateRenderlets("postRedraw"),t},r.commitHandler=function(t){return arguments.length?(m=t,r):m},r.redrawGroup=function(){return m?m(!1,function(t,e){t?console.log(t):n.redrawAll(r.chartGroup())}):n.redrawAll(r.chartGroup()),r},r.renderGroup=function(){return m?m(!1,function(t,e){t?console.log(t):n.renderAll(r.chartGroup())}):n.renderAll(r.chartGroup()),r},r._invokeFilteredListener=function(t){void 0!==t&&H.filtered(r,t)},r._invokeZoomedListener=function(){H.zoomed(r)};var z=function(t,e){return null===e||void 0===e?t.length>0:t.some(function(t){return e<=t&&e>=t})};r.hasFilterHandler=function(t){return arguments.length?(z=t,r):z},r.hasFilter=function(t){return z(P,t)};var V=function(t,e){for(var n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t};r.removeFilterHandler=function(t){return arguments.length?(V=t,r):V};var I=function(t,e){return t.push(e),t};r.addFilterHandler=function(t){return arguments.length?(I=t,r):I};var X=function(t){return[]};return r.resetFilterHandler=function(t){return arguments.length?(X=t,r):X},r.replaceFilter=function(t){P=X(P),r.filter(t)},r.filter=function(t){if(!arguments.length)return P.length>0?P[0]:null;var e=P;return t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach(function(t){e=z(e,t)?V(e,t):I(e,t)}):e=null===t?X(e):z(e,t)?V(e,t):I(e,t),P=l(e),r._invokeFilteredListener(t),null!==d&&r.hasFilter()?r.turnOnControls():r.turnOffControls(),r},r.filters=function(){return P},r.highlightSelected=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!0),t.select(e).classed(n.constants.DESELECTED_CLASS,!1)},r.fadeDeselected=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!1),t.select(e).classed(n.constants.DESELECTED_CLASS,!0)},r.resetHighlight=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!1),t.select(e).classed(n.constants.DESELECTED_CLASS,!1)},r.onClick=function(t){var e=r.keyAccessor()(t);n.events.trigger(function(){r.filter(e),r.redrawGroup()})},r.filterHandler=function(t){return arguments.length?(Y=t,r):Y},r._doRender=function(){return r},r._doRedraw=function(){return r},r.legendables=function(){return[]},r.legendHighlight=function(){},r.legendReset=function(){},r.legendToggle=function(){},r.isLegendableHidden=function(){return!1},r.keyAccessor=function(t){return arguments.length?(C=t,r):C},r.valueAccessor=function(t){return arguments.length?(L=t,r):L},r.label=function(t,e){return arguments.length?(R=t,(void 0===e||e)&&(S=!0),r):R},r.renderLabel=function(t){return arguments.length?(S=t,r):S},r.title=function(t){return arguments.length?(w=t,r):w},r.renderTitle=function(t){return arguments.length?(E=t,r):E},r.renderlet=n.logger.deprecate(function(t){return r.on("renderlet."+n.utils.uniqueId(),t),r},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),r.chartGroup=function(t){return arguments.length?(g||n.deregisterChart(r,G),G=t,g||n.registerChart(r,G),r):G},r.expireCache=function(){return r},r.legend=function(t){return arguments.length?((y=t).parent(r),r):y},r.chartID=function(){return r.__dcFlag__},r.options=function(t){var e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var i in t)"function"==typeof r[i]?t[i]instanceof Array&&-1!==e.indexOf(i)?r[i].apply(r,t[i]):r[i].call(r,t[i]):n.logger.debug("Not a valid option setter name: "+i);return r},r.on=function(t,e){return H.on(t,e),r},r},n.marginMixin=function(t){var e={top:10,right:50,bottom:30,left:30};return t.margins=function(n){return arguments.length?(e=n,t):e},t.effectiveWidth=function(){return t.width()-t.margins().left-t.margins().right},t.effectiveHeight=function(){return t.height()-t.margins().top-t.margins().bottom},t},n.colorMixin=function(e){var r=t.scale.category20c(),i=!0,a=function(t){return e.keyAccessor()(t)};return e.colors=function(n){return arguments.length?(r=n instanceof Array?t.scale.quantize().range(n):t.functor(n),e):r},e.ordinalColors=function(n){return e.colors(t.scale.ordinal().range(n))},e.linearColors=function(n){return e.colors(t.scale.linear().range(n).interpolate(t.interpolateHcl))},e.colorAccessor=function(t){return arguments.length?(a=t,i=!1,e):a},e.defaultColorAccessor=function(){return i},e.colorDomain=function(t){return arguments.length?(r.domain(t),e):r.domain()},e.calculateColorDomain=function(){var n=[t.min(e.data(),e.colorAccessor()),t.max(e.data(),e.colorAccessor())];return r.domain(n),e},e.getColor=function(t,e){return r(a.call(this,t,e))},e.colorCalculator=n.logger.deprecate(function(t){return arguments.length?(e.getColor=t,e):e.getColor},"colorMixin.colorCalculator has been deprecated. Please colorMixin.colors and colorMixin.colorAccessor instead"),e},n.coordinateGridMixin=function(e){function r(t,e){return!t||!e||t.length!==e.length||t.some(function(t,n){return t&&e[n]?t.toString()!==e[n].toString():t===e[n]})}function i(t,n){e.isOrdinal()?(e.elasticX()||0===b.domain().length)&&b.domain(e._ordinalXDomain()):e.elasticX()&&b.domain([e.xAxisMin(),e.xAxisMax()]);var i=b.domain();(n||r(k,i))&&e.rescale(),k=i,e.isOrdinal()?b.rangeBands([0,e.xAxisLength()],et,e._useOuterPadding()?tt:0):b.range([0,e.xAxisLength()]),E=E.scale(e.x()),a(t)}function a(t){var r=t.select("g."+y);if(I){r.empty()&&(r=t.insert("g",":first-child").attr("class",x+" "+y).attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var i=E.tickValues()?E.tickValues():"function"==typeof b.ticks?b.ticks(E.ticks()[0]):b.domain(),a=r.selectAll("line").data(i),o=a.enter().append("line").attr("x1",function(t){return b(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return b(t)}).attr("y2",0).attr("opacity",0);n.transition(o,e.transitionDuration(),e.transitionDelay()).attr("opacity",1),n.transition(a,e.transitionDuration(),e.transitionDelay()).attr("x1",function(t){return b(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return b(t)}).attr("y2",0),a.exit().remove()}else r.selectAll("line").remove()}function o(){return e._xAxisY()-e.margins().top}function l(){return e.anchorName().replace(/[ .#=\[\]]/g,"-")+"-clip"}function u(){var t=n.utils.appendOrSelect(m,"defs"),r=l(),i=n.utils.appendOrSelect(t,"#"+r,"clipPath").attr("id",r),a=2*$;n.utils.appendOrSelect(i,"rect").attr("width",e.xAxisLength()+a).attr("height",e.yAxisHeight()+a).attr("transform","translate(-"+$+", -"+$+")")}function s(t){e.isOrdinal()&&(z=!1),i(e.g(),t),e._prepareYAxis(e.g()),e.plotData(),(e.elasticX()||q||t)&&e.renderXAxis(e.g()),(e.elasticY()||q||t)&&e.renderYAxis(e.g()),t?e.renderBrush(e.g(),!1):e.redrawBrush(e.g(),q),e.fadeDeselectedArea(),q=!1}function c(){Q?e._enableMouseZoom():J&&e._disableMouseZoom()}function d(){if(X=!0,W){var t=_;S&&(t=f(t,S.x().domain()));var r=g(e.x().domain(),t);r&&e.x().domain(r)}var i=e.x().domain(),a=n.filters.RangedFilter(i[0],i[1]);e.replaceFilter(a),e.rescale(),e.redraw(),S&&!h(e.filter(),S.filter())&&n.events.trigger(function(){S.replaceFilter(a),S.redraw()}),e._invokeZoomedListener(),n.events.trigger(function(){e.redrawGroup()},n.constants.EVENT_DELAY),X=!h(i,_)}function f(t,e){return(t[0]>e[1]||t[1]<e[0])&&console.warn("could not intersect extents"),[Math.max(t[0],e[0]),Math.min(t[1],e[1])]}function g(t,e){var r=t[1]-t[0];return t[0]<e[0]?[e[0],Math.min(e[1],n.utils.add(e[0],r,"millis"))]:t[1]>e[1]?[Math.max(e[0],n.utils.subtract(e[1],r,"millis")),e[1]]:null}function h(t,e){return!t&&!e||!(!t||!e)&&(0===t.length&&0===e.length||t[0].valueOf()===e[0].valueOf()&&t[1].valueOf()===e[1].valueOf())}function p(t){return t instanceof Array&&t.length>1}var x="grid-line",y="vertical";(e=n.colorMixin(n.marginMixin(n.baseMixin(e)))).colors(t.scale.category10()),e._mandatoryAttributes().push("x");var m,v,A,b,_,D,k,C,L,R,M,S,w,E=t.svg.axis().orient("bottom"),B=n.units.integers,O=0,T="day",F=!1,N=0,G=t.svg.axis().orient("left"),H=0,P=!1,Y=0,U=t.svg.brush(),z=!0,V=!1,I=!1,X=!1,q=!1,K=[1,1/0],W=!0,j=t.behavior.zoom().on("zoom",d),Z=t.behavior.zoom().on("zoom",null),J=!1,Q=!1,$=0,tt=.5,et=0,nt=!1;return e.rescale=function(){return M=void 0,q=!0,e},e.resizing=function(){return q},e.rangeChart=function(t){return arguments.length?((S=t).focusChart(e),e):S},e.zoomScale=function(t){return arguments.length?(K=t,e):K},e.zoomOutRestrict=function(t){return arguments.length?(K[0]=t?1:0,W=t,e):W},e._generateG=function(t){m=void 0===t?e.svg():t;var n=window.location.href.split("#")[0];return v=m.append("g"),A=v.append("g").attr("class","chart-body").attr("transform","translate("+e.margins().left+", "+e.margins().top+")").attr("clip-path","url("+n+"#"+l()+")"),v},e.g=function(t){return arguments.length?(v=t,e):v},e.mouseZoomable=function(t){return arguments.length?(Q=t,e):Q},e.chartBodyG=function(t){return arguments.length?(A=t,e):A},e.x=function(t){return arguments.length?(b=t,_=b.domain(),e.rescale(),e):b},e.xOriginalDomain=function(){return _},e.xUnits=function(t){return arguments.length?(B=t,e):B},e.xAxis=function(t){return arguments.length?(E=t,e):E},e.elasticX=function(t){return arguments.length?(F=t,e):F},e.xAxisPadding=function(t){return arguments.length?(O=t,e):O},e.xAxisPaddingUnit=function(t){return arguments.length?(T=t,e):T},e.xUnitCount=function(){if(void 0===M){var t=e.xUnits()(e.x().domain()[0],e.x().domain()[1],e.x().domain());M=t instanceof Array?t.length:t}return M},e.useRightYAxis=function(t){return arguments.length?(nt=t,e):nt},e.isOrdinal=function(){return e.xUnits()===n.units.ordinal},e._useOuterPadding=function(){return!0},e._ordinalXDomain=function(){return e._computeOrderedGroups(e.data()).map(e.keyAccessor())},e.renderXAxis=function(t){var r=t.select("g.x");r.empty()&&(r=t.append("g").attr("class","axis x").attr("transform","translate("+e.margins().left+","+e._xAxisY()+")"));var i=t.select("text.x-axis-label");i.empty()&&e.xAxisLabel()&&(i=t.append("text").attr("class","x-axis-label").attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-N)+")").attr("text-anchor","middle")),e.xAxisLabel()&&i.text()!==e.xAxisLabel()&&i.text(e.xAxisLabel()),n.transition(r,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+e.margins().left+","+e._xAxisY()+")").call(E),n.transition(i,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-N)+")")},e._xAxisY=function(){return e.height()-e.margins().bottom},e.xAxisLength=function(){return e.effectiveWidth()},e.xAxisLabel=function(t,n){return arguments.length?(D=t,e.margins().bottom-=N,N=void 0===n?12:n,e.margins().bottom+=N,e):D},e._prepareYAxis=function(n){if(void 0===C||e.elasticY()){void 0===C&&(C=t.scale.linear());var r=e.yAxisMin()||0,i=e.yAxisMax()||0;C.domain([r,i]).rangeRound([e.yAxisHeight(),0])}C.range([e.yAxisHeight(),0]),G=G.scale(C),nt&&G.orient("right"),e._renderHorizontalGridLinesForAxis(n,C,G)},e.renderYAxisLabel=function(t,r,i,a){a=a||Y;var o=e.g().select("text.y-axis-label."+t+"-label"),l=e.margins().top+e.yAxisHeight()/2;o.empty()&&r&&(o=e.g().append("text").attr("transform","translate("+a+","+l+"),rotate("+i+")").attr("class","y-axis-label "+t+"-label").attr("text-anchor","middle").text(r)),r&&o.text()!==r&&o.text(r),n.transition(o,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+a+","+l+"),rotate("+i+")")},e.renderYAxisAt=function(t,r,i){var a=e.g().select("g."+t);a.empty()&&(a=e.g().append("g").attr("class","axis "+t).attr("transform","translate("+i+","+e.margins().top+")")),n.transition(a,e.transitionDuration(),e.transitionDelay()).attr("transform","translate("+i+","+e.margins().top+")").call(r)},e.renderYAxis=function(){var t=nt?e.width()-e.margins().right:e._yAxisX();e.renderYAxisAt("y",G,t);var n=nt?e.width()-Y:Y,r=nt?90:-90;e.renderYAxisLabel("y",e.yAxisLabel(),r,n)},e._renderHorizontalGridLinesForAxis=function(t,r,i){var a=t.select("g.horizontal");if(V){var o=i.tickValues()?i.tickValues():r.ticks(i.ticks()[0]);a.empty()&&(a=t.insert("g",":first-child").attr("class",x+" horizontal").attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var l=a.selectAll("line").data(o),u=l.enter().append("line").attr("x1",1).attr("y1",function(t){return r(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return r(t)}).attr("opacity",0);n.transition(u,e.transitionDuration(),e.transitionDelay()).attr("opacity",1),n.transition(l,e.transitionDuration(),e.transitionDelay()).attr("x1",1).attr("y1",function(t){return r(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return r(t)}),l.exit().remove()}else a.selectAll("line").remove()},e._yAxisX=function(){return e.useRightYAxis()?e.width()-e.margins().right:e.margins().left},e.yAxisLabel=function(t,n){return arguments.length?(L=t,e.margins().left-=Y,Y=void 0===n?12:n,e.margins().left+=Y,e):L},e.y=function(t){return arguments.length?(C=t,e.rescale(),e):C},e.yAxis=function(t){return arguments.length?(G=t,e):G},e.elasticY=function(t){return arguments.length?(P=t,e):P},e.renderHorizontalGridLines=function(t){return arguments.length?(V=t,e):V},e.renderVerticalGridLines=function(t){return arguments.length?(I=t,e):I},e.xAxisMin=function(){var r=t.min(e.data(),function(t){return e.keyAccessor()(t)});return n.utils.subtract(r,O,T)},e.xAxisMax=function(){var r=t.max(e.data(),function(t){return e.keyAccessor()(t)});return n.utils.add(r,O,T)},e.yAxisMin=function(){var r=t.min(e.data(),function(t){return e.valueAccessor()(t)});return n.utils.subtract(r,H)},e.yAxisMax=function(){var r=t.max(e.data(),function(t){return e.valueAccessor()(t)});return n.utils.add(r,H)},e.yAxisPadding=function(t){return arguments.length?(H=t,e):H},e.yAxisHeight=function(){return e.effectiveHeight()},e.round=function(t){return arguments.length?(R=t,e):R},e._rangeBandPadding=function(t){return arguments.length?(et=t,e):et},e._outerRangeBandPadding=function(t){return arguments.length?(tt=t,e):tt},n.override(e,"filter",function(t){return arguments.length?(e._filter(t),t?e.brush().extent(t):e.brush().clear(),e):e._filter()}),e.brush=function(t){return arguments.length?(U=t,e):U},e.renderBrush=function(t){if(z){U.on("brush",e._brushing),U.on("brushstart",e._disableMouseZoom),U.on("brushend",c);var n=t.append("g").attr("class","brush").attr("transform","translate("+e.margins().left+","+e.margins().top+")").call(U.x(e.x()));e.setBrushY(n,!1),e.setHandlePaths(n),e.hasFilter()&&e.redrawBrush(t,!1)}},e.setHandlePaths=function(t){t.selectAll(".resize").append("path").attr("d",e.resizeHandlePath)},e.setBrushY=function(t){t.selectAll("rect").attr("height",o()),t.selectAll(".resize path").attr("d",e.resizeHandlePath)},e.extendBrush=function(){var t=U.extent();return e.round()&&(t[0]=t.map(e.round())[0],t[1]=t.map(e.round())[1],v.select(".brush").call(U.extent(t))),t},e.brushIsEmpty=function(t){return U.empty()||!t||t[1]<=t[0]},e._brushing=function(){var t=e.extendBrush();if(e.redrawBrush(v,!1),e.brushIsEmpty(t))n.events.trigger(function(){e.filter(null),e.redrawGroup()},n.constants.EVENT_DELAY);else{var r=n.filters.RangedFilter(t[0],t[1]);n.events.trigger(function(){e.replaceFilter(r),e.redrawGroup()},n.constants.EVENT_DELAY)}},e.redrawBrush=function(t,r){if(z){e.filter()&&e.brush().empty()&&e.brush().extent(e.filter());var i=n.optionalTransition(r,e.transitionDuration(),e.transitionDelay())(t.select("g.brush"));e.setBrushY(i),i.call(e.brush().x(e.x()).extent(e.brush().extent()))}e.fadeDeselectedArea()},e.fadeDeselectedArea=function(){},e.resizeHandlePath=function(t){var e=+("e"===t),n=e?1:-1,r=o()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},e.clipPadding=function(t){return arguments.length?($=t,e):$},e._preprocessData=function(){},e._doRender=function(){return e.resetSvg(),e._preprocessData(),e._generateG(),u(),s(!0),c(),e},e._doRedraw=function(){return e._preprocessData(),s(!1),u(),e},e._enableMouseZoom=function(){J=!0,j.x(e.x()).scaleExtent(K).size([e.width(),e.height()]).duration(e.transitionDuration()),e.root().call(j)},e._disableMouseZoom=function(){e.root().call(Z)},e.focus=function(t){p(t)?e.x().domain(t):e.x().domain(_),j.x(e.x()),d()},e.refocused=function(){return X},e.focusChart=function(t){return arguments.length?(w=t,e.on("filtered",function(t){t.filter()?h(t.filter(),w.filter())||n.events.trigger(function(){w.focus(t.filter())}):n.events.trigger(function(){w.x().domain(w.xOriginalDomain())})}),e):w},e.brushOn=function(t){return arguments.length?(z=t,e):z},e},n.stackMixin=function(e){function r(t,n){var r=t.accessor||e.valueAccessor();return t.name=String(t.name||n),t.values=t.group.all().map(function(n,i){return{x:e.keyAccessor()(n,i),y:t.hidden?null:r(n,i),data:n,layer:t.name,hidden:t.hidden}}),t.values=t.values.filter(i()),t.values}function i(){if(!e.x())return t.functor(!0);var n=e.x().domain();return e.isOrdinal()?function(){return!0}:e.elasticX()?function(){return!0}:function(t){return t.x>=n[0]&&t.x<=n[n.length-1]}}function a(t){var e=s.map(n.pluck("name")).indexOf(t);return s[e]}function o(){var t=e.data().map(function(t){return t.values});return Array.prototype.concat.apply([],t)}function l(t){return!t.hidden}var u=t.layout.stack().values(r),s=[],c={},d=!1,f=!1;return e.stack=function(t,n,r){if(!arguments.length)return s;arguments.length<=2&&(r=n);var i={group:t};return"string"==typeof n&&(i.name=n),"function"==typeof r&&(i.accessor=r),s.push(i),e},n.override(e,"group",function(t,n,r){return arguments.length?(s=[],c={},e.stack(t,n),r&&e.valueAccessor(r),e._group(t,n)):e._group()}),e.hidableStacks=function(t){return arguments.length?(d=t,e):d},e.gethidable=function(){return d},e.hideStack=function(t){var n=a(t);return n&&(n.hidden=!0),e},e.showStack=function(t){var n=a(t);return n&&(n.hidden=!1),e},e.getValueAccessorByIndex=function(t){return s[t].accessor||e.valueAccessor()},e.yAxisMin=function(){var r=t.min(o(),function(t){return t.y<0?t.y+t.y0:t.y0});return n.utils.subtract(r,e.yAxisPadding())},e.yAxisMax=function(){var r=t.max(o(),function(t){return t.y>0?t.y+t.y0:t.y0});return n.utils.add(r,e.yAxisPadding())},e.xAxisMin=function(){var r=t.min(o(),n.pluck("x"));return n.utils.subtract(r,e.xAxisPadding(),e.xAxisPaddingUnit())},e.xAxisMax=function(){var r=t.max(o(),n.pluck("x"));return n.utils.add(r,e.xAxisPadding(),e.xAxisPaddingUnit())},n.override(e,"title",function(t,n){return t?"function"==typeof t?e._title(t):t===e._groupName&&"function"==typeof n?e._title(n):"function"!=typeof n?c[t]||e._title():(c[t]=n,e):e._title()}),e.stackLayout=function(n){return arguments.length?((u=n).values()===t.layout.stack().values()&&u.values(r),e):u},e.data(function(){var t=s.filter(l);return t.length?e.stackLayout()(t):[]}),e._ordinalXDomain=function(){var t=o().map(n.pluck("data"));return e._computeOrderedGroups(t).map(e.keyAccessor())},e.colorAccessor(function(t){return this.layer||this.name||t.name||t.layer}),e.legendables=function(){return s.map(function(t,n){return{chart:e,name:t.name,hidden:t.hidden||!1,color:e.getColor.call(t,t.values,n)}})},e.isLegendableHidden=function(t){if(t&&s.length>1){var e=a(t.name);return!!e&&e.hidden}return f},e.legendToggle=function(t){d&&(t&&s.length>1?e.isLegendableHidden(t):f=!f,e.redrawGroup())},e},n.capMixin=function(e){var r=1/0,i=!0,a="Others",o=function(n,r){var i=t.sum(r,e.valueAccessor()),a=r.map(e.keyAccessor());return i>0?n.concat([{others:a,key:e.othersLabel(),value:i}]):n};return e.cappedKeyAccessor=function(t,n){return t.others?t.key:e.keyAccessor()(t,n)},e.cappedValueAccessor=function(t,n){return t.others?t.value:e.valueAccessor()(t,n)},e.data(function(t){if(r===1/0)return e._computeOrderedGroups(t.all());var n,a=t.all();if(a=e._computeOrderedGroups(a),r)if(i)n=a.slice(r),a=a.slice(0,r);else{var l=Math.max(0,a.length-r);n=a.slice(0,l),a=a.slice(l)}return o?o(a,n):a}),e.cap=function(t){return arguments.length?(r=t,e):r},e.takeFront=function(t){return arguments.length?(i=t,e):i},e.othersLabel=function(t){return arguments.length?(a=t,e):a},e.othersGrouper=function(t){return arguments.length?(o=t,e):o},n.override(e,"onClick",function(t){t.others&&e.filter([t.others]),e._onClick(t)}),e},n.bubbleMixin=function(e){var r=.3,i=10,a=!1,o=!1;e.BUBBLE_NODE_CLASS="node",e.BUBBLE_CLASS="bubble",e.MIN_RADIUS=10,(e=n.colorMixin(e)).renderLabel(!0),e.data(function(n){var r=n.all();if(a){var i=e.radiusValueAccessor();r.sort(function(e,n){return t.descending(i(e),i(n))})}return r});var l=t.scale.linear().domain([0,100]),u=function(t){return t.r};e.r=function(t){return arguments.length?(l=t,e):l},e.elasticRadius=function(t){return arguments.length?(o=t,e):o},e.calculateRadiusDomain=function(){o&&e.r().domain([e.rMin(),e.rMax()])},e.radiusValueAccessor=function(t){return arguments.length?(u=t,e):u},e.rMin=function(){return t.min(e.data(),function(t){return e.radiusValueAccessor()(t)})},e.rMax=function(){return t.max(e.data(),function(t){return e.radiusValueAccessor()(t)})},e.bubbleR=function(t){var n=e.radiusValueAccessor()(t),r=e.r()(n);return(isNaN(r)||n<=0)&&(r=0),r};var s=function(t){return e.label()(t)},c=function(t){return e.bubbleR(t)>i},d=function(t){return c(t)?1:0},f=function(t){return c(t)?"all":"none"};e._doRenderLabel=function(t){if(e.renderLabel()){var r=t.select("text");r.empty()&&(r=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",e.onClick)),r.attr("opacity",0).attr("pointer-events",f).text(s),n.transition(r,e.transitionDuration(),e.transitionDelay()).attr("opacity",d)}},e.doUpdateLabels=function(t){if(e.renderLabel()){var r=t.select("text").attr("pointer-events",f).text(s);n.transition(r,e.transitionDuration(),e.transitionDelay()).attr("opacity",d)}};var g=function(t){return e.title()(t)};return e._doRenderTitles=function(t){e.renderTitle()&&t.select("title").empty()&&t.append("title").text(g)},e.doUpdateTitles=function(t){e.renderTitle()&&t.select("title").text(g)},e.sortBubbleSize=function(t){return arguments.length?(a=t,e):a},e.minRadius=function(t){return arguments.length?(e.MIN_RADIUS=t,e):e.MIN_RADIUS},e.minRadiusWithLabel=function(t){return arguments.length?(i=t,e):i},e.maxBubbleRelativeSize=function(t){return arguments.length?(r=t,e):r},e.fadeDeselectedArea=function(){e.hasFilter()?e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(t){e.isSelectedNode(t)?e.highlightSelected(this):e.fadeDeselected(this)}):e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(){e.resetHighlight(this)})},e.isSelectedNode=function(t){return e.hasFilter(t.key)},e.onClick=function(t){var r=t.key;n.events.trigger(function(){e.filter(r),e.redrawGroup()})},e},n.pieChart=function(e,r){function i(){E=B||t.min([K.width(),K.height()])/2;var e,r=v(),i=b();if(t.sum(K.data(),K.valueAccessor())?(e=i(K.data()),O.classed(U,!1)):(e=i([{key:z,value:1,others:[z]}]),O.classed(U,!0)),O){var o=O.select("g."+P).selectAll("g."+G).data(e),l=O.select("g."+Y).selectAll("text."+H).data(e);a(o,l,r,e),g(e,r),y(o,l),m(),n.transition(O,K.transitionDuration(),K.transitionDelay()).attr("transform","translate("+K.cx()+","+K.cy()+")")}}function a(t,e,n,r){var i=o(t);l(i,n),u(i),d(e,r,n)}function o(t){return t.enter().append("g").attr("class",function(t,e){return G+" _"+e})}function l(t,e){var r=t.append("path").attr("fill",L).on("click",R).attr("d",function(t,n){return M(t,n,e)}),i=n.transition(r,K.transitionDuration(),K.transitionDelay());i.attrTween&&i.attrTween("d",k)}function u(t){K.renderTitle()&&t.append("title").text(function(t){return K.title()(t.data)})}function s(t,e){K._applyLabelText(t),n.transition(t,K.transitionDuration(),K.transitionDelay()).attr("transform",function(t){return S(t,e)}).attr("text-anchor","middle")}function c(t,e){K.select("g.pie-slice._"+t).classed("highlight",e)}function d(t,e,n){K.renderLabel()&&(s(t.enter().append("text").attr("class",function(t,e){var n=G+" "+H+" _"+e;return N&&(n+=" external"),n}).on("click",R).on("mouseover",function(t,e){c(e,!0)}).on("mouseout",function(t,e){c(e,!1)}),n),N&&q&&f(e,n))}function f(e,r){var i=O.selectAll("polyline."+G).data(e);i.enter().append("polyline").attr("class",function(t,e){return"pie-path _"+e+" "+G}).on("click",R).on("mouseover",function(t,e){c(e,!0)}).on("mouseout",function(t,e){c(e,!1)}),i.exit().remove();var a=t.svg.arc().outerRadius(E-I+N).innerRadius(E-I),o=n.transition(i,K.transitionDuration(),K.transitionDelay());o.attrTween?o.attrTween("points",function(e){var n=this._current||e;n={startAngle:n.startAngle,endAngle:n.endAngle};var i=t.interpolate(n,e);return this._current=i(0),function(t){var e=i(t);return[r.centroid(e),a.centroid(e)]}}):o.attr("points",function(t){return[r.centroid(t),a.centroid(t)]}),o.style("visibility",function(t){return t.endAngle-t.startAngle<1e-4?"hidden":"visible"})}function g(t,e){h(t,e),p(t,e),x(t)}function h(t,e){var r=O.selectAll("g."+G).data(t).select("path").attr("d",function(t,n){return M(t,n,e)}),i=n.transition(r,K.transitionDuration(),K.transitionDelay());i.attrTween&&i.attrTween("d",k),i.attr("fill",L)}function p(t,e){K.renderLabel()&&(s(O.selectAll("text."+H).data(t),e),N&&q&&f(t,e))}function x(t){K.renderTitle()&&O.selectAll("g."+G).data(t).select("title").text(function(t){return K.title()(t.data)})}function y(t,e){t.exit().remove(),e.exit().remove()}function m(){K.hasFilter()?K.selectAll("g."+G).each(function(t){A(t)?K.highlightSelected(this):K.fadeDeselected(this)}):K.selectAll("g."+G).each(function(){K.resetHighlight(this)})}function v(){return t.svg.arc().outerRadius(E-I).innerRadius(V)}function A(t){return K.hasFilter(K.cappedKeyAccessor(t.data))}function b(){return t.layout.pie().sort(null).value(K.cappedValueAccessor)}function _(t){var e=t.endAngle-t.startAngle;return isNaN(e)||e<X}function D(t){return 0===K.cappedValueAccessor(t)}function k(e){e.innerRadius=V;var n=this._current;n=C(n)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle};var r=t.interpolate(n,e);return this._current=r(0),function(t){return M(r(t),0,v())}}function C(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)}function L(t,e){return K.getColor(t.data,e)}function R(t,e){O.attr("class")!==U&&K.onClick(t.data,e)}function M(t,e,n){var r=n(t,e);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function S(e,n){var r;return r=N?t.svg.arc().outerRadius(E-I+N).innerRadius(E-I+N).centroid(e):n.centroid(e),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}function w(e,n){K.selectAll("g.pie-slice").each(function(r){e.name===r.data.key&&t.select(this).classed("highlight",n)})}var E,B,O,T,F,N,G="pie-slice",H="pie-label",P="pie-slice-group",Y="pie-label-group",U="empty-chart",z="empty",V=0,I=0,X=.5,q=!1,K=n.capMixin(n.colorMixin(n.baseMixin({})));return K.colorAccessor(K.cappedKeyAccessor),K.title(function(t){return K.cappedKeyAccessor(t)+": "+K.cappedValueAccessor(t)}),K.slicesCap=K.cap,K.label(K.cappedKeyAccessor),K.renderLabel(!0),K.transitionDuration(350),K.transitionDelay(0),K._doRender=function(){return K.resetSvg(),(O=K.svg().append("g").attr("transform","translate("+K.cx()+","+K.cy()+")")).append("g").attr("class",P),O.append("g").attr("class",Y),i(),K},K._applyLabelText=function(t){t.text(function(t){return!D(t.data)&&!_(t)||A(t)?K.label()(t.data):""})},K.externalRadiusPadding=function(t){return arguments.length?(I=t,K):I},K.innerRadius=function(t){return arguments.length?(V=t,K):V},K.radius=function(t){return arguments.length?(B=t,K):B},K.cx=function(t){return arguments.length?(T=t,K):T||K.width()/2},K.cy=function(t){return arguments.length?(F=t,K):F||K.height()/2},K._doRedraw=function(){return i(),K},K.minAngleForLabel=function(t){return arguments.length?(X=t,K):X},K.emptyTitle=function(t){return 0===arguments.length?z:(z=t,K)},K.externalLabels=function(t){return 0===arguments.length?N:(N=t||void 0,K)},K.drawPaths=function(t){return 0===arguments.length?q:(q=t,K)},K.legendables=function(){return K.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:K};return n.color=K.getColor(t,e),n})},K.legendHighlight=function(t){w(t,!0)},K.legendReset=function(t){w(t,!1)},K.legendToggle=function(t){K.onClick({key:t.name,others:t.others})},K.anchor(e,r)},n.barChart=function(e,r){function i(t){return n.utils.safeNumber(Math.abs(f.y()(t.y+t.y0)-f.y()(t.y0)))}function a(t,e,r){var a=t.selectAll("text.barLabel").data(r.values,n.pluck("x"));a.enter().append("text").attr("class","barLabel").attr("text-anchor","middle"),f.isOrdinal()&&(a.on("click",f.onClick),a.attr("cursor","pointer")),n.transition(a,f.transitionDuration(),f.transitionDelay()).attr("x",function(t){var e=f.x()(t.x);return h||(e+=s/2),n.utils.safeNumber(e)}).attr("y",function(t){var e=f.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),n.utils.safeNumber(e-d)}).text(function(t){return f.label()(t)}),n.transition(a.exit(),f.transitionDuration(),f.transitionDelay()).attr("height",0).remove()}function o(t,e,r){var a=t.selectAll("rect.bar").data(r.values,n.pluck("x")),o=a.enter().append("rect").attr("class","bar").attr("fill",n.pluck("data",f.getColor)).attr("y",f.yAxisHeight()).attr("height",0);f.renderTitle()&&o.append("title").text(n.pluck("data",f.title(r.name))),f.isOrdinal()&&a.on("click",f.onClick),n.transition(a,f.transitionDuration(),f.transitionDelay()).attr("x",function(t){var e=f.x()(t.x);return h&&(e-=s/2),f.isOrdinal()&&void 0!==g&&(e+=g/2),n.utils.safeNumber(e)}).attr("y",function(t){var e=f.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),n.utils.safeNumber(e)}).attr("width",s).attr("height",function(t){return i(t)}).attr("fill",n.pluck("data",f.getColor)).select("title").text(n.pluck("data",f.title(r.name))),n.transition(a.exit(),f.transitionDuration(),f.transitionDelay()).attr("x",function(t){return f.x()(t.x)}).attr("width",.9*s).remove()}function l(){if(void 0===s){var t=f.xUnitCount();((s=f.isOrdinal()&&void 0===g?Math.floor(f.x().rangeBand()):g?Math.floor((f.xAxisLength()-(t-1)*g)/t):Math.floor(f.xAxisLength()/(1+f.barPadding())/t))===1/0||isNaN(s)||s<c)&&(s=c)}}function u(e,n){return function(){var r=t.select(this).attr("fill")===e;return n?!r:r}}var s,c=1,d=3,f=n.stackMixin(n.coordinateGridMixin({})),g=2,h=!1,p=!1;return n.override(f,"rescale",function(){return f._rescale(),s=void 0,f}),n.override(f,"render",function(){return f.round()&&h&&!p&&n.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),f._render()}),f.label(function(t){return n.utils.printSingleValue(t.y0+t.y)},!1),f.plotData=function(){var e=f.chartBodyG().selectAll("g.stack").data(f.data());l(),e.enter().append("g").attr("class",function(t,e){return"stack _"+e});var n=e.size()-1;e.each(function(e,r){var i=t.select(this);o(i,0,e),f.renderLabel()&&n===r&&a(i,0,e)})},f.fadeDeselectedArea=function(){var t=f.chartBodyG().selectAll("rect.bar"),e=f.brush().extent();if(f.isOrdinal())f.hasFilter()?(t.classed(n.constants.SELECTED_CLASS,function(t){return f.hasFilter(t.x)}),t.classed(n.constants.DESELECTED_CLASS,function(t){return!f.hasFilter(t.x)})):(t.classed(n.constants.SELECTED_CLASS,!1),t.classed(n.constants.DESELECTED_CLASS,!1));else if(f.brushIsEmpty(e))t.classed(n.constants.DESELECTED_CLASS,!1);else{var r=e[0],i=e[1];t.classed(n.constants.DESELECTED_CLASS,function(t){return t.x<r||t.x>=i})}},f.centerBar=function(t){return arguments.length?(h=t,f):h},n.override(f,"onClick",function(t){f._onClick(t.data)}),f.barPadding=function(t){return arguments.length?(f._rangeBandPadding(t),g=void 0,f):f._rangeBandPadding()},f._useOuterPadding=function(){return void 0===g},f.outerPadding=f._outerRangeBandPadding,f.gap=function(t){return arguments.length?(g=t,f):g},f.extendBrush=function(){var t=f.brush().extent();return!f.round()||h&&!p||(t[0]=t.map(f.round())[0],t[1]=t.map(f.round())[1],f.chartBodyG().select(".brush").call(f.brush().extent(t))),t},f.alwaysUseRounding=function(t){return arguments.length?(p=t,f):p},f.legendHighlight=function(t){f.isLegendableHidden(t)||f.g().selectAll("rect.bar").classed("highlight",u(t.color)).classed("fadeout",u(t.color,!0))},f.legendReset=function(){f.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},n.override(f,"xAxisMax",function(){var t=this._xAxisMax();return"resolution"in f.xUnits()&&(t+=f.xUnits().resolution),t}),f.anchor(e,r)},n.lineChart=function(e,r){function i(t,e){return C.getColor.call(t,t.values,e)}function a(e,r){var a=t.svg.line().x(function(t){return C.x()(t.x)}).y(function(t){return C.y()(t.y+t.y0)}).interpolate(E).tension(B);m&&a.defined(m);var o=e.append("path").attr("class","line").attr("stroke",i);v&&o.attr("stroke-dasharray",v),n.transition(r.select("path.line"),C.transitionDuration(),C.transitionDelay()).attr("stroke",i).attr("d",function(t){return l(a(t.values))})}function o(e,r){if(L){var a=t.svg.area().x(function(t){return C.x()(t.x)}).y(function(t){return C.y()(t.y+t.y0)}).y0(function(t){return C.y()(t.y0)}).interpolate(E).tension(B);m&&a.defined(m),e.append("path").attr("class","area").attr("fill",i).attr("d",function(t){return l(a(t.values))}),n.transition(r.select("path.area"),C.transitionDuration(),C.transitionDelay()).attr("fill",i).attr("d",function(t){return l(a(t.values))})}}function l(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}function u(e,r){if("always"===C.xyTipsOn()||!C.brushOn()&&C.xyTipsOn()){var i=A+"-list",a=e.select("g."+i);a.empty()&&(a=e.append("g").attr("class",i)),r.each(function(e,r){var i=e.values;m&&(i=i.filter(m));var o=a.select("g."+A+"._"+r);o.empty()&&(o=a.append("g").attr("class",A+" _"+r)),c(o);var l=o.selectAll("circle."+b).data(i,n.pluck("x"));l.enter().append("circle").attr("class",b).attr("r",g()).style("fill-opacity",S).style("stroke-opacity",w).attr("fill",C.getColor).on("mousemove",function(){var e=t.select(this);d(e),f(e,o)}).on("mouseout",function(){h(t.select(this)),p(o)}),l.call(x,e),n.transition(l,C.transitionDuration()).attr("cx",function(t){return n.utils.safeNumber(C.x()(t.x))}).attr("cy",function(t){return n.utils.safeNumber(C.y()(t.y+t.y0))}).attr("fill",C.getColor),l.exit().remove()})}}function s(e){e.each(function(e,r){var i=t.select(this).selectAll("text.lineLabel").data(e.values,n.pluck("x"));i.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle"),n.transition(i,C.transitionDuration()).attr("x",function(t){return n.utils.safeNumber(C.x()(t.x))}).attr("y",function(t){var e=C.y()(t.y+t.y0)-k;return n.utils.safeNumber(e)}).text(function(t){return C.label()(t)}),n.transition(i.exit(),C.transitionDuration()).attr("height",0).remove()})}function c(t){(t.select("path."+_).empty()?t.append("path").attr("class",_):t.select("path."+_)).style("display","none").attr("stroke-dasharray","5,5"),(t.select("path."+D).empty()?t.append("path").attr("class",D):t.select("path."+D)).style("display","none").attr("stroke-dasharray","5,5")}function d(t){return t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",R),t}function f(t,e){var n=t.attr("cx"),r=t.attr("cy"),i="M"+(C._yAxisX()-C.margins().left)+" "+r+"L"+n+" "+r,a="M"+n+" "+C.yAxisHeight()+"L"+n+" "+r;e.select("path."+_).style("display","").attr("d",i),e.select("path."+D).style("display","").attr("d",a)}function g(){return M||R}function h(t){t.style("fill-opacity",S).style("stroke-opacity",w).attr("r",g())}function p(t){t.select("path."+_).style("display","none"),t.select("path."+D).style("display","none")}function x(t,e){C.renderTitle()&&(t.select("title").remove(),t.append("title").text(n.pluck("data",C.title(e.name))))}function y(e,n,r){return function(){var i=t.select(this),a=i.attr("stroke")===e&&i.attr("stroke-dasharray")===(n instanceof Array?n.join(","):null)||i.attr("fill")===e;return r?!a:a}}var m,v,A="dc-tooltip",b="dot",_="yRef",D="xRef",k=3,C=n.stackMixin(n.coordinateGridMixin({})),L=!1,R=5,M=null,S=1e-6,w=1e-6,E="linear",B=.7,O=!0;return C.transitionDuration(500),C.transitionDelay(0),C._rangeBandPadding(1),C.plotData=function(){var t=C.chartBodyG(),e=t.select("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));var n=e.selectAll("g.stack").data(C.data()),r=n.enter().append("g").attr("class",function(t,e){return"stack _"+e});a(r,n),o(r,n),u(t,n),C.renderLabel()&&s(n)},C.interpolate=function(t){return arguments.length?(E=t,C):E},C.tension=function(t){return arguments.length?(B=t,C):B},C.defined=function(t){return arguments.length?(m=t,C):m},C.dashStyle=function(t){return arguments.length?(v=t,C):v},C.renderArea=function(t){return arguments.length?(L=t,C):L},C.label(function(t){return n.utils.printSingleValue(t.y0+t.y)},!1),C.xyTipsOn=function(t){return arguments.length?(O=t,C):O},C.dotRadius=function(t){return arguments.length?(R=t,C):R},C.renderDataPoints=function(t){return arguments.length?(t?(S=t.fillOpacity||.8,w=t.strokeOpacity||.8,M=t.radius||2):(S=1e-6,w=1e-6,M=null),C):{fillOpacity:S,strokeOpacity:w,radius:M}},C.legendHighlight=function(t){C.isLegendableHidden(t)||C.g().selectAll("path.line, path.area").classed("highlight",y(t.color,t.dashstyle)).classed("fadeout",y(t.color,t.dashstyle,!0))},C.legendReset=function(){C.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},n.override(C,"legendables",function(){var t=C._legendables();return v?t.map(function(t){return t.dashstyle=v,t}):t}),C.anchor(e,r)},n.dataCount=function(e,r){var i=t.format(",d"),a=n.baseMixin({}),o={some:"",all:""};return a.html=function(t){return arguments.length?(t.all&&(o.all=t.all),t.some&&(o.some=t.some),a):o},a.formatNumber=function(t){return arguments.length?(i=t,a):i},a._doRender=function(){var t=a.dimension().size(),e=a.group().value(),n=i(t),r=i(e);return t===e&&""!==o.all?a.root().html(o.all.replace("%total-count",n).replace("%filter-count",r)):""!==o.some?a.root().html(o.some.replace("%total-count",n).replace("%filter-count",r)):(a.selectAll(".total-count").text(n),a.selectAll(".filter-count").text(r)),a},a._doRedraw=function(){return a._doRender()},a.anchor(e,r)},n.dataTable=function(e,r){function i(){var t=!0;if(p.forEach(function(e){t&="function"==typeof e}),!t){var e=g.selectAll("thead").data([0]);e.enter().append("thead"),e.exit().remove();var n=e.selectAll("tr").data([0]);n.enter().append("tr"),n.exit().remove();var r=n.selectAll("th").data(p);r.enter().append("th"),r.exit().remove(),r.attr("class",f).html(function(t){return g._doColumnHeaderFormat(t)})}var i=g.root().selectAll("tbody").data(a(),function(t){return g.keyAccessor()(t)}),o=i.enter().append("tbody");return!0===v&&o.append("tr").attr("class",d).append("td").attr("class",u).attr("colspan",p.length).html(function(t){return g.keyAccessor()(t)}),i.exit().remove(),o}function a(){var e;return e=y===t.ascending?g.dimension().bottom(h):g.dimension().top(h),t.nest().key(g.group()).sortKeys(y).entries(e.sort(function(t,e){return y(x(t),x(e))}).slice(m,l))}function o(t){var e=t.order().selectAll("tr."+s).data(function(t){return t.values}),n=e.enter().append("tr").attr("class",s);return p.forEach(function(t,e){n.append("td").attr("class",c+" _"+e).html(function(e){return g._doColumnValueFormat(t,e)})}),e.exit().remove(),e}var l,u="dc-table-label",s="dc-table-row",c="dc-table-column",d="dc-table-group",f="dc-table-head",g=n.baseMixin({}),h=25,p=[],x=function(t){return t},y=t.ascending,m=0,v=!0;return g._doRender=function(){return g.selectAll("tbody").remove(),o(i()),g},g._doColumnValueFormat=function(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)},g._doColumnHeaderFormat=function(t){return"function"==typeof t?g._doColumnHeaderFnToString(t):"string"==typeof t?g._doColumnHeaderCapitalize(t):String(t.label)},g._doColumnHeaderCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},g._doColumnHeaderFnToString=function(t){var e=String(t),n=e.indexOf("return ");if(n>=0){var r=e.lastIndexOf(";");r>=0&&(e=e.substring(n+7,r)).indexOf("numberFormat")>=0&&(e=e.replace("numberFormat",""))}return e},g._doRedraw=function(){return g._doRender()},g.size=function(t){return arguments.length?(h=t,g):h},g.beginSlice=function(t){return arguments.length?(m=t,g):m},g.endSlice=function(t){return arguments.length?(l=t,g):l},g.columns=function(t){return arguments.length?(p=t,g):p},g.sortBy=function(t){return arguments.length?(x=t,g):x},g.order=function(t){return arguments.length?(y=t,g):y},g.showGroups=function(t){return arguments.length?(v=t,g):v},g.anchor(e,r)},n.dataGrid=function(e,r){function i(){var t=c.root().selectAll("div."+s).data(a(),function(t){return c.keyAccessor()(t)}),e=t.enter().append("div").attr("class",s);return x&&e.html(function(t){return x(t)}),t.exit().remove(),e}function a(){var e=c.dimension().top(d);return t.nest().key(c.group()).sortKeys(h).entries(e.sort(function(t,e){return h(g(t),g(e))}).slice(p,l))}function o(t){var e=t.order().selectAll("div."+u).data(function(t){return t.values});return e.enter().append("div").attr("class",u).html(function(t){return f(t)}),e.exit().remove(),e}var l,u="dc-grid-item",s="dc-grid-top",c=n.baseMixin({}),d=999,f=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},g=function(t){return t},h=t.ascending,p=0,x=function(t){return"<div class='dc-grid-group'><h1 class='dc-grid-label'>"+c.keyAccessor()(t)+"</h1></div>"};return c._doRender=function(){return c.selectAll("div."+s).remove(),o(i()),c},c._doRedraw=function(){return c._doRender()},c.beginSlice=function(t){return arguments.length?(p=t,c):p},c.endSlice=function(t){return arguments.length?(l=t,c):l},c.size=function(t){return arguments.length?(d=t,c):d},c.html=function(t){return arguments.length?(f=t,c):f},c.htmlGroup=function(t){return arguments.length?(x=t,c):x},c.sortBy=function(t){return arguments.length?(g=t,c):g},c.order=function(t){return arguments.length?(h=t,c):h},c.anchor(e,r)},n.bubbleChart=function(t,e){function r(t){var e=t.enter().append("g");e.attr("class",u.BUBBLE_NODE_CLASS).attr("transform",s).append("circle").attr("class",function(t,e){return u.BUBBLE_CLASS+" _"+e}).on("click",u.onClick).attr("fill",u.getColor).attr("r",0),n.transition(t,u.transitionDuration(),u.transitionDelay()).select("circle."+u.BUBBLE_CLASS).attr("r",function(t){return u.bubbleR(t)}).attr("opacity",function(t){return u.bubbleR(t)>0?1:0}),u._doRenderLabel(e),u._doRenderTitles(e)}function i(t){n.transition(t,u.transitionDuration(),u.transitionDelay()).attr("transform",s).select("circle."+u.BUBBLE_CLASS).attr("fill",u.getColor).attr("r",function(t){return u.bubbleR(t)}).attr("opacity",function(t){return u.bubbleR(t)>0?1:0}),u.doUpdateLabels(t),u.doUpdateTitles(t)}function a(t){t.exit().remove()}function o(t){var e=u.x()(u.keyAccessor()(t));return isNaN(e)&&(e=0),e}function l(t){var e=u.y()(u.valueAccessor()(t));return isNaN(e)&&(e=0),e}var u=n.bubbleMixin(n.coordinateGridMixin({}));u.transitionDuration(750),u.transitionDelay(0);var s=function(t){return"translate("+o(t)+","+l(t)+")"};return u.plotData=function(){u.calculateRadiusDomain(),u.r().range([u.MIN_RADIUS,u.xAxisLength()*u.maxBubbleRelativeSize()]);var t=u.data(),e=u.chartBodyG().selectAll("g."+u.BUBBLE_NODE_CLASS).data(t,function(t){return t.key});u.sortBubbleSize()&&e.order(),r(e),i(e),a(e),u.fadeDeselectedArea()},u.renderBrush=function(){},u.redrawBrush=function(){u.fadeDeselectedArea()},u.anchor(t,e)},n.compositeChart=function(e,r){function i(t,e){var n,r,i,o,l;return t&&(n=f(),r=p()),e&&(i=g(),o=x()),b.alignYAxes()&&t&&e&&(l=a(n,r,i,o)),l||{lyAxisMin:n,lyAxisMax:r,ryAxisMin:i,ryAxisMax:o}}function a(t,e,n,r){var i=(r-n)/(e-t);return{lyAxisMin:Math.min(t,n/i),lyAxisMax:Math.max(e,r/i),ryAxisMin:Math.min(n,t*i),ryAxisMax:Math.max(r,e*i)}}function o(e){var n=void 0===b.rightY()||b.elasticY(),r=n||b.resizing();void 0===b.rightY()&&b.rightY(t.scale.linear()),n&&b.rightY().domain([e.ryAxisMin,e.ryAxisMax]),r&&b.rightY().rangeRound([b.yAxisHeight(),0]),b.rightY().range([b.yAxisHeight(),0]),b.rightYAxis(b.rightYAxis().scale(b.rightY())),b.rightYAxis().orient("right")}function l(e){var n=void 0===b.y()||b.elasticY(),r=n||b.resizing();void 0===b.y()&&b.y(t.scale.linear()),n&&b.y().domain([e.lyAxisMin,e.lyAxisMax]),r&&b.y().rangeRound([b.yAxisHeight(),0]),b.y().range([b.yAxisHeight(),0]),b.yAxis(b.yAxis().scale(b.y())),b.yAxis().orient("left")}function u(t,e){t._generateG(b.g()),t.g().attr("class",A+" _"+e)}function s(){return _.filter(function(t){return!t.isLegendableHidden()&&!t.useRightYAxis()})}function c(){return _.filter(function(t){return!t.isLegendableHidden()&&t.useRightYAxis()})}function d(t){return t.map(function(t){return t.yAxisMin()})}function f(){return t.min(d(s()))}function g(){return t.min(d(c()))}function h(t){return t.map(function(t){return t.yAxisMax()})}function p(){return n.utils.add(t.max(h(s())),b.yAxisPadding())}function x(){return n.utils.add(t.max(h(c())),b.yAxisPadding())}function y(){return _.map(function(t){return t.xAxisMin()})}function m(){return _.map(function(t){return t.xAxisMax()})}var v,A="sub",b=n.coordinateGridMixin({}),_=[],D={},k=!1,C=!0,L=!1,R=t.svg.axis(),M=0,S=12,w=!1;return b._mandatoryAttributes([]),b.transitionDuration(500),b.transitionDelay(0),n.override(b,"_generateG",function(){for(var t=this.__generateG(),e=0;e<_.length;++e){var n=_[e];n.isLegendableHidden()||(u(n,e),n.dimension()||n.dimension(b.dimension()),n.group()||n.group(b.group()),n.chartGroup(b.chartGroup()),n.svg(b.svg()),n.xUnits(b.xUnits()),n.transitionDuration(b.transitionDuration(),b.transitionDelay()),n.brushOn(b.brushOn()),n.renderTitle(b.renderTitle()),n.elasticX(b.elasticX()))}return t}),b._brushing=function(){for(var t=b.extendBrush(),e=b.brushIsEmpty(t),n=0;n<_.length;++n)_[n].replaceFilter(e?null:t)},b._prepareYAxis=function(){var t=0!==s().length,e=0!==c().length,n=i(t,e);t&&l(n),e&&o(n),s().length>0&&!w?b._renderHorizontalGridLinesForAxis(b.g(),b.y(),b.yAxis()):c().length>0&&b._renderHorizontalGridLinesForAxis(b.g(),v,R)},b.renderYAxis=function(){0!==s().length&&(b.renderYAxisAt("y",b.yAxis(),b.margins().left),b.renderYAxisLabel("y",b.yAxisLabel(),-90)),0!==c().length&&(b.renderYAxisAt("yr",b.rightYAxis(),b.width()-b.margins().right),b.renderYAxisLabel("yr",b.rightYAxisLabel(),90,b.width()-S))},b.plotData=function(){for(var t=0;t<_.length;++t){var e=_[t];e.g()||u(e,t),k&&e.colors(b.colors()),e.x(b.x()),e.xAxis(b.xAxis()),e.useRightYAxis()?(e.y(b.rightY()),e.yAxis(b.rightYAxis())):(e.y(b.y()),e.yAxis(b.yAxis())),e.plotData(),e._activateRenderlets()}},b.useRightAxisGridLines=function(t){return arguments?(w=t,b):w},b.childOptions=function(t){return arguments.length?(D=t,_.forEach(function(t){t.options(D)}),b):D},b.fadeDeselectedArea=function(){for(var t=0;t<_.length;++t){var e=_[t];e.brush(b.brush()),e.fadeDeselectedArea()}},b.rightYAxisLabel=function(t,e){return arguments.length?(M=t,b.margins().right-=S,S=void 0===e?12:e,b.margins().right+=S,b):M},b.compose=function(t){return(_=t).forEach(function(t){t.height(b.height()),t.width(b.width()),t.margins(b.margins()),C&&t.title(b.title()),t.options(D)}),b},b.children=function(){return _},b.shareColors=function(t){return arguments.length?(k=t,b):k},b.shareTitle=function(t){return arguments.length?(C=t,b):C},b.rightY=function(t){return arguments.length?(v=t,b.rescale(),b):v},b.alignYAxes=function(t){return arguments.length?(L=t,b.rescale(),b):L},delete b.yAxisMin,delete b.yAxisMax,n.override(b,"xAxisMin",function(){return n.utils.subtract(t.min(y()),b.xAxisPadding())}),n.override(b,"xAxisMax",function(){return n.utils.add(t.max(m()),b.xAxisPadding())}),b.legendables=function(){return _.reduce(function(t,e){return k&&e.colors(b.colors()),t.push.apply(t,e.legendables()),t},[])},b.legendHighlight=function(t){for(var e=0;e<_.length;++e)_[e].legendHighlight(t)},b.legendReset=function(t){for(var e=0;e<_.length;++e)_[e].legendReset(t)},b.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},b.rightYAxis=function(t){return arguments.length?(R=t,b):R},b.anchor(e,r)},n.seriesChart=function(e,r){function i(t){u[t].g()&&u[t].g().remove(),delete u[t]}function a(){Object.keys(u).map(i),u={}}var o,l=n.compositeChart(e,r),u={},s=n.lineChart,c=t.ascending,d=function(e,n){return t.ascending(l.keyAccessor()(e),l.keyAccessor()(n))};return l._mandatoryAttributes().push("seriesAccessor","chart"),l.shareColors(!0),l._preprocessData=function(){var e,n=[],a=t.nest().key(o);c&&a.sortKeys(c),d&&a.sortValues(d);var f=a.entries(l.data()).map(function(i,a){var o=u[i.key]||s.call(l,l,r,i.key,a);return u[i.key]||(e=!0),u[i.key]=o,n.push(i.key),o.dimension(l.dimension()).group({all:t.functor(i.values)},i.key).keyAccessor(l.keyAccessor()).valueAccessor(l.valueAccessor()).brushOn(l.brushOn())});Object.keys(u).filter(function(t){return-1===n.indexOf(t)}).forEach(function(t){i(t),e=!0}),l._compose(f),e&&l.legend()&&l.legend().render()},l.chart=function(t){return arguments.length?(s=t,a(),l):s},l.seriesAccessor=function(t){return arguments.length?(o=t,a(),l):o},l.seriesSort=function(t){return arguments.length?(c=t,a(),l):c},l.valueSort=function(t){return arguments.length?(d=t,a(),l):d},l._compose=l.compose,delete l.compose,l},n.geoChoroplethChart=function(e,r){function i(t){var e=a();if(o(t)){var n=l(t);g(n,t,e),h(n,t,e)}}function a(){for(var t={},e=p.data(),n=0;n<e.length;++n)t[p.keyAccessor()(e[n])]=p.valueAccessor()(e[n]);return t}function o(t){return f(t).keyAccessor}function l(t){return p.svg().selectAll(u(t)).classed("selected",function(e){return s(t,e)}).classed("deselected",function(e){return c(t,e)}).attr("class",function(e){var r=f(t).name+" "+n.utils.nameToId(f(t).keyAccessor(e));return s(t,e)&&(r+=" selected"),c(t,e)&&(r+=" deselected"),r})}function u(t){return"g.layer"+t+" g."+f(t).name}function s(t,e){return p.hasFilter()&&p.hasFilter(d(t,e))}function c(t,e){return p.hasFilter()&&!p.hasFilter(d(t,e))}function d(t,e){return f(t).keyAccessor(e)}function f(t){return m[t]}function g(e,r,i){var a=e.select("path").attr("fill",function(){var e=t.select(this).attr("fill");return e||"none"}).on("click",function(t){return p.onClick(t,r)});n.transition(a,p.transitionDuration(),p.transitionDelay()).attr("fill",function(t,e){return p.getColor(i[f(r).keyAccessor(t)],e)})}function h(t,e,n){p.renderTitle()&&t.selectAll("title").text(function(t){var r=d(e,t),i=n[r];return p.title()({key:r,value:i})})}var p=n.colorMixin(n.baseMixin({}));p.colorAccessor(function(t){return t||0});var x,y=t.geo.path(),m=[];return p._doRender=function(){p.resetSvg();for(var t=0;t<m.length;++t){var e=p.svg().append("g").attr("class","layer"+t).selectAll("g."+f(t).name).data(f(t).data).enter().append("g").attr("class",f(t).name);e.append("path").attr("fill","white").attr("d",y),e.append("title"),i(t)}x=!1},p.onClick=function(t,e){var r=f(e).keyAccessor(t);n.events.trigger(function(){p.filter(r),p.redrawGroup()})},p._doRedraw=function(){for(var t=0;t<m.length;++t)i(t),x&&p.svg().selectAll("g."+f(t).name+" path").attr("d",y);x=!1},p.overlayGeoJson=function(t,e,n){for(var r=0;r<m.length;++r)if(m[r].name===e)return m[r].data=t,m[r].keyAccessor=n,p;return m.push({name:e,data:t,keyAccessor:n}),p},p.projection=function(t){return y.projection(t),x=!0,p},p.geoJsons=function(){return m},p.geoPath=function(){return y},p.removeGeoJson=function(t){for(var e=[],n=0;n<m.length;++n){var r=m[n];r.name!==t&&e.push(r)}return m=e,p},p.anchor(e,r)},n.bubbleOverlay=function(e,r){function i(){return(s=g.select("g."+c)).empty()&&(s=g.svg().append("g").attr("class",c)),s}function a(){var t=o();g.calculateRadiusDomain(),h.forEach(function(e){var r=l(e,t),i=r.select("circle."+f);i.empty()&&(i=r.append("circle").attr("class",f).attr("r",0).attr("fill",g.getColor).on("click",g.onClick)),n.transition(i,g.transitionDuration(),g.transitionDelay()).attr("r",function(t){return g.bubbleR(t)}),g._doRenderLabel(r),g._doRenderTitles(r)})}function o(){var t={};return g.data().forEach(function(e){t[g.keyAccessor()(e)]=e}),t}function l(t,e){var r=d+" "+n.utils.nameToId(t.name),i=s.select("g."+n.utils.nameToId(t.name));return i.empty()&&(i=s.append("g").attr("class",r).attr("transform","translate("+t.x+","+t.y+")")),i.datum(e[t.name]),i}function u(){var t=o();g.calculateRadiusDomain(),h.forEach(function(e){var r=l(e,t),i=r.select("circle."+f);n.transition(i,g.transitionDuration(),g.transitionDelay()).attr("r",function(t){return g.bubbleR(t)}).attr("fill",g.getColor),g.doUpdateLabels(r),g.doUpdateTitles(r)})}var s,c="bubble-overlay",d="node",f="bubble",g=n.bubbleMixin(n.baseMixin({})),h=[];return g.transitionDuration(750),g.transitionDelay(0),g.radiusValueAccessor(function(t){return t.value}),g.point=function(t,e,n){return h.push({name:t,x:e,y:n}),g},g._doRender=function(){return s=i(),g.r().range([g.MIN_RADIUS,g.width()*g.maxBubbleRelativeSize()]),a(),g.fadeDeselectedArea(),g},g._doRedraw=function(){return u(),g.fadeDeselectedArea(),g},g.debug=function(e){if(e){var r=g.select("g."+n.constants.DEBUG_GROUP_CLASS);r.empty()&&(r=g.svg().append("g").attr("class",n.constants.DEBUG_GROUP_CLASS));var i=r.append("text").attr("x",10).attr("y",20);r.append("rect").attr("width",g.width()).attr("height",g.height()).on("mousemove",function(){var e=t.mouse(r.node()),n=e[0]+", "+e[1];i.text(n)})}else g.selectAll(".debug").remove();return g},g.anchor(e,r),g},n.rowChart=function(e,r){function i(){if(!v||A){var e=t.extent(b,B.cappedValueAccessor);e[0]>0&&(e[0]=0),e[1]<0&&(e[1]=0),v=t.scale.linear().domain(e).range([0,B.effectiveWidth()])}O.scale(v)}function a(){var t=m.select("g.axis");i(),t.empty()&&(t=m.append("g").attr("class","axis")),t.attr("transform","translate(0, "+B.effectiveHeight()+")"),n.transition(t,B.transitionDuration(),B.transitionDelay()).call(O)}function o(){m.selectAll("g.tick").select("line.grid-line").remove(),m.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-B.effectiveHeight()})}function l(){b=B.data(),a(),o();var t=m.selectAll("g."+S).data(b);u(t),s(t),d(t)}function u(t){var e=t.enter().append("g").attr("class",function(t,e){return S+" _"+e});e.append("rect").attr("width",0),g(e)}function s(t){t.exit().remove()}function c(){var t=v(0);return t===-1/0||t!==t?v(1):t}function d(t){var e,r=b.length;e=M||(B.effectiveHeight()-(r+1)*R)/r,k||(D=e/2);var i=t.attr("transform",function(t,n){return"translate(0,"+((n+1)*R+n*e)+")"}).select("rect").attr("height",e).attr("fill",B.getColor).on("click",p).classed("deselected",function(t){return!!B.hasFilter()&&!y(t)}).classed("selected",function(t){return!!B.hasFilter()&&y(t)});n.transition(i,B.transitionDuration(),B.transitionDelay()).attr("width",function(t){return Math.abs(c()-v(B.valueAccessor()(t)))}).attr("transform",x),f(t),h(t)}function f(t){B.renderTitle()&&(t.select("title").remove(),t.append("title").text(B.title()))}function g(t){B.renderLabel()&&t.append("text").on("click",p),B.renderTitleLabel()&&t.append("text").attr("class",w).on("click",p)}function h(t){if(B.renderLabel()){var e=t.select("text").attr("x",_).attr("y",D).attr("dy",C).on("click",p).attr("class",function(t,e){return S+" _"+e}).text(function(t){return B.label()(t)});n.transition(e,B.transitionDuration(),B.transitionDelay()).attr("transform",x)}if(B.renderTitleLabel()){var r=t.select("."+w).attr("x",B.effectiveWidth()-L).attr("y",D).attr("dy",C).attr("text-anchor","end").on("click",p).attr("class",function(t,e){return w+" _"+e}).text(function(t){return B.title()(t)});n.transition(r,B.transitionDuration(),B.transitionDelay()).attr("transform",x)}}function p(t){B.onClick(t)}function x(t){var e=v(B.cappedValueAccessor(t)),n=c();return"translate("+(e>n?n:e)+",0)"}function y(t){return B.hasFilter(B.cappedKeyAccessor(t))}var m,v,A,b,_=10,D=15,k=!1,C="0.35em",L=2,R=5,M=!1,S="row",w="titlerow",E=!1,B=n.capMixin(n.marginMixin(n.colorMixin(n.baseMixin({})))),O=t.svg.axis().orient("bottom");return B.rowsCap=B.cap,B._doRender=function(){return B.resetSvg(),m=B.svg().append("g").attr("transform","translate("+B.margins().left+","+B.margins().top+")"),l(),B},B.title(function(t){return B.cappedKeyAccessor(t)+": "+B.cappedValueAccessor(t)}),B.label(B.cappedKeyAccessor),B.x=function(t){return arguments.length?(v=t,B):v},B.renderTitleLabel=function(t){return arguments.length?(E=t,B):E},B._doRedraw=function(){return l(),B},B.xAxis=function(){return O},B.fixedBarHeight=function(t){return arguments.length?(M=t,B):M},B.gap=function(t){return arguments.length?(R=t,B):R},B.elasticX=function(t){return arguments.length?(A=t,B):A},B.labelOffsetX=function(t){return arguments.length?(_=t,B):_},B.labelOffsetY=function(t){return arguments.length?(D=t,k=!0,B):D},B.titleLabelOffsetX=function(t){return arguments.length?(L=t,B):L},B.anchor(e,r)},n.legend=function(){function t(){return s+u}var e,r,i,a={},o=0,l=0,u=12,s=5,c=!1,d=560,f=70,g=!1,h=n.pluck("name");return a.parent=function(t){return arguments.length?(e=t,a):e},a.render=function(){e.svg().select("g.dc-legend").remove(),i=e.svg().append("g").attr("class","dc-legend").attr("transform","translate("+o+","+l+")");var a=e.legendables();void 0!==r&&(a=a.slice(0,r));var p=i.selectAll("g.dc-legend-item").data(a).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(t){e.legendHighlight(t)}).on("mouseout",function(t){e.legendReset(t)}).on("click",function(t){t.chart.gethidable()&&(t.chart.legendToggle(t),e.legendReset(t))});i.selectAll("g.dc-legend-item").classed("fadeout",function(t){return t.chart.isLegendableHidden(t)}),a.some(n.pluck("dashstyle"))?p.append("line").attr("x1",0).attr("y1",u/2).attr("x2",u).attr("y2",u/2).attr("stroke-width",2).attr("stroke-dasharray",n.pluck("dashstyle")).attr("stroke",n.pluck("color")):p.append("rect").attr("width",u).attr("height",u).attr("fill",function(t){return t?t.color:"blue"}),p.append("text").text(h).attr("x",u+2).attr("y",function(){return u/2+(this.clientHeight?this.clientHeight:13)/2-2});var x=0,y=0;p.attr("transform",function(e,n){if(c){var r=!0===g?this.getBBox().width+s:f;x+r>d&&x>0&&(++y,x=0);var i="translate("+x+","+y*t()+")";return x+=r,i}return"translate(0,"+n*t()+")"})},a.x=function(t){return arguments.length?(o=t,a):o},a.y=function(t){return arguments.length?(l=t,a):l},a.gap=function(t){return arguments.length?(s=t,a):s},a.itemHeight=function(t){return arguments.length?(u=t,a):u},a.horizontal=function(t){return arguments.length?(c=t,a):c},a.legendWidth=function(t){return arguments.length?(d=t,a):d},a.itemWidth=function(t){return arguments.length?(f=t,a):f},a.autoItemWidth=function(t){return arguments.length?(g=t,a):g},a.legendText=function(t){return arguments.length?(h=t,a):h},a.maxItems=function(t){return arguments.length?(r=n.utils.isNumber(t)?t:void 0,a):r},a},n.scatterPlot=function(e,r){function i(t,e){o.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(function(t){return o.title()(t)}))}function a(e,r){var i=o.selectAll(".chart-body path.symbol").filter(function(){return e(t.select(this))}),a=l.size();l.size(Math.pow(r,2)),n.transition(i,o.transitionDuration(),o.transitionDelay()).attr("d",l),l.size(a)}var o=n.coordinateGridMixin({}),l=t.svg.symbol(),u=function(t){return t.value},s=o.keyAccessor();o.keyAccessor(function(t){return s(t)[0]}),o.valueAccessor(function(t){return s(t)[1]}),o.colorAccessor(function(){return o._groupName}),o.title(function(t){return o.keyAccessor()(t)+","+o.valueAccessor()(t)+": "+o.existenceAccessor()(t)});var c=function(t){return"translate("+o.x()(o.keyAccessor()(t))+","+o.y()(o.valueAccessor()(t))+")"},d=7,f=5,g=3,h=null,p=1,x=0,y=0,m=1,v=null,A=[];return l.size(function(t,e){return u(t)?A[e]?Math.pow(f,2):Math.pow(g,2):Math.pow(x,2)}),n.override(o,"_filter",function(t){return arguments.length?o.__filter(n.filters.RangedTwoDimensionalFilter(t)):o.__filter()}),o.plotData=function(){var t=o.chartBodyG().selectAll("path.symbol").data(o.data());t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",o.getColor).attr("transform",c),t.call(i,o.data()),t.each(function(t,e){A[e]=!o.filter()||o.filter().isFiltered([t.key[0],t.key[1]])}),n.transition(t,o.transitionDuration(),o.transitionDelay()).attr("opacity",function(t,e){return u(t)?A[e]?m:o.excludedOpacity():y}).attr("fill",function(t,e){return v&&!u(t)?v:o.excludedColor()&&!A[e]?o.excludedColor():o.getColor(t)}).attr("transform",c).attr("d",l),n.transition(t.exit(),o.transitionDuration(),o.transitionDelay()).attr("opacity",0).remove()},o.existenceAccessor=function(t){return arguments.length?(u=t,this):u},o.symbol=function(t){return arguments.length?(l.type(t),o):l.type()},o.symbolSize=function(t){return arguments.length?(f=t,o):f},o.highlightedSize=function(t){return arguments.length?(d=t,o):d},o.excludedSize=function(t){return arguments.length?(g=t,o):g},o.excludedColor=function(t){return arguments.length?(h=t,o):h},o.excludedOpacity=function(t){return arguments.length?(p=t,o):p},o.hiddenSize=o.emptySize=function(t){return arguments.length?(x=t,o):x},o.emptyColor=function(t){return arguments.length?(v=t,o):v},o.emptyOpacity=function(t){return arguments.length?(y=t,o):y},o.nonemptyOpacity=function(t){return arguments.length?(m=t,o):y},o.legendables=function(){return[{chart:o,name:o._groupName,color:o.getColor()}]},o.legendHighlight=function(e){a(function(t){return t.attr("fill")===e.color},d),o.selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!0)},o.legendReset=function(e){a(function(t){return t.attr("fill")===e.color},f),o.selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!1)},o.setHandlePaths=function(){},o.extendBrush=function(){var t=o.brush().extent();return o.round()&&(t[0]=t[0].map(o.round()),t[1]=t[1].map(o.round()),o.g().select(".brush").call(o.brush().extent(t))),t},o.brushIsEmpty=function(t){return o.brush().empty()||!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},o._brushing=function(){var t=o.extendBrush();if(o.redrawBrush(o.g()),o.brushIsEmpty(t))n.events.trigger(function(){o.filter(null),o.redrawGroup()});else{var e=n.filters.RangedTwoDimensionalFilter(t);n.events.trigger(function(){o.filter(null),o.filter(e),o.redrawGroup()},n.constants.EVENT_DELAY)}},o.setBrushY=function(t){t.call(o.brush().y(o.y()))},o.anchor(e,r)},n.numberDisplay=function(e,r){function i(t){if(t.length<1)return null;for(var e=0,n=l.ordering()(t[0]),r=1;r<t.length;++r){var i=l.ordering()(t[r]);i>n&&(n=i,e=r)}return t[e]}var a,o=t.format(".2s"),l=n.baseMixin({}),u={one:"",some:"",none:""};return l._mandatoryAttributes(["group"]),l.ordering(function(t){return t.value}),l.html=function(t){return arguments.length?(t.none?u.none=t.none:t.one?u.none=t.one:t.some&&(u.none=t.some),t.one?u.one=t.one:t.some&&(u.one=t.some),t.some?u.some=t.some:t.one&&(u.some=t.one),l):u},l.value=function(){return l.data()},l.data(function(t){var e=t.value?t.value():i(t.all());return l.valueAccessor()(e)}),l.transitionDuration(250),l.transitionDelay(0),l._doRender=function(){var e=l.value(),n=l.selectAll(".number-display");n.empty()&&(n=n.data([0]).enter().append("span").attr("class","number-display")),n.transition().duration(l.transitionDuration()).delay(l.transitionDelay()).ease("quad-out-in").tween("text",function(){var n=isFinite(a)?a:0,r=t.interpolateNumber(n||0,e);return a=e,function(t){var n=null,i=l.formatNumber()(r(t));0===e&&""!==u.none?n=u.none:1===e&&""!==u.one?n=u.one:""!==u.some&&(n=u.some),this.innerHTML=n?n.replace("%number",i):i}})},l._doRedraw=function(){return l._doRender()},l.formatNumber=function(t){return arguments.length?(o=t,l):o},l.anchor(e,r)},n.heatMap=function(e,r){function i(t,e){var r=h.selectAll(".box-group").filter(function(n){return n.key[t]===e}),i=r.filter(function(t){return!h.hasFilter(t.key)});n.events.trigger(function(){var t=(i.empty()?r:i).data().map(function(t){return n.filters.TwoDimensionalFilter(t.key)});h._filter([t]),h.redrawGroup()})}var a,o,l,u=t.ascending,s=t.ascending,c=t.scale.ordinal(),d=t.scale.ordinal(),f=6.75,g=6.75,h=n.colorMixin(n.marginMixin(n.baseMixin({})));h._mandatoryAttributes(["group"]),h.title(h.colorAccessor());var p=function(t){return t},x=function(t){return t};h.colsLabel=function(t){return arguments.length?(p=t,h):p},h.rowsLabel=function(t){return arguments.length?(x=t,h):x};var y=function(t){i(0,t)},m=function(t){i(1,t)},v=function(t){var e=t.key;n.events.trigger(function(){h.filter(e),h.redrawGroup()})};return n.override(h,"filter",function(t){return arguments.length?h._filter(n.filters.TwoDimensionalFilter(t)):h._filter()}),h.rows=function(t){return arguments.length?(l=t,h):l},h.rowOrdering=function(t){return arguments.length?(s=t,h):s},h.cols=function(t){return arguments.length?(o=t,h):o},h.colOrdering=function(t){return arguments.length?(u=t,h):u},h._doRender=function(){return h.resetSvg(),a=h.svg().append("g").attr("class","heatmap").attr("transform","translate("+h.margins().left+","+h.margins().top+")"),h._doRedraw()},h._doRedraw=function(){var t=h.data(),e=h.rows()||t.map(h.valueAccessor()),r=h.cols()||t.map(h.keyAccessor());s&&(e=e.sort(s)),u&&(r=r.sort(u)),e=d.domain(e),r=c.domain(r);var i=e.domain().length,o=r.domain().length,l=Math.floor(h.effectiveWidth()/o),p=Math.floor(h.effectiveHeight()/i);r.rangeRoundBands([0,h.effectiveWidth()]),e.rangeRoundBands([h.effectiveHeight(),0]);var x=a.selectAll("g.box-group").data(h.data(),function(t,e){return h.keyAccessor()(t,e)+"\0"+h.valueAccessor()(t,e)}),y=x.enter().append("g").attr("class","box-group");y.append("rect").attr("class","heat-box").attr("fill","white").on("click",h.boxOnClick()),h.renderTitle()&&(y.append("title"),x.select("title").text(h.title())),n.transition(x.select("rect"),h.transitionDuration(),h.transitionDelay()).attr("x",function(t,e){return r(h.keyAccessor()(t,e))}).attr("y",function(t,n){return e(h.valueAccessor()(t,n))}).attr("rx",f).attr("ry",g).attr("fill",h.getColor).attr("width",l).attr("height",p),x.exit().remove();var m=a.select("g.cols");m.empty()&&(m=a.append("g").attr("class","cols axis"));var v=m.selectAll("text").data(r.domain());v.enter().append("text").attr("x",function(t){return r(t)+l/2}).style("text-anchor","middle").attr("y",h.effectiveHeight()).attr("dy",12).on("click",h.xAxisOnClick()).text(h.colsLabel()),n.transition(v,h.transitionDuration(),h.transitionDelay()).text(h.colsLabel()).attr("x",function(t){return r(t)+l/2}).attr("y",h.effectiveHeight()),v.exit().remove();var A=a.select("g.rows");A.empty()&&(A=a.append("g").attr("class","rows axis"));var b=A.selectAll("text").data(e.domain());return b.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",h.yAxisOnClick()).text(h.rowsLabel()),n.transition(b,h.transitionDuration(),h.transitionDelay()).text(h.rowsLabel()).attr("y",function(t){return e(t)+p/2}),b.exit().remove(),h.hasFilter()?h.selectAll("g.box-group").each(function(t){h.isSelectedNode(t)?h.highlightSelected(this):h.fadeDeselected(this)}):h.selectAll("g.box-group").each(function(){h.resetHighlight(this)}),h},h.boxOnClick=function(t){return arguments.length?(v=t,h):v},h.xAxisOnClick=function(t){return arguments.length?(y=t,h):y},h.yAxisOnClick=function(t){return arguments.length?(m=t,h):m},h.xBorderRadius=function(t){return arguments.length?(f=t,h):f},h.yBorderRadius=function(t){return arguments.length?(g=t,h):g},h.isSelectedNode=function(t){return h.hasFilter(t.key)},h.anchor(e,r)},function(){function e(t){return[0,t.length-1]}function n(e){return[t.quantile(e,.25),t.quantile(e,.5),t.quantile(e,.75)]}t.box=function(){function r(e){e.each(function(e,n){e=e.map(s).sort(t.ascending);var r=t.select(this),g=e.length,h=e[0],p=e[g-1],x=e.quartiles=d(e),y=c&&c.call(this,e,n),m=y&&y.map(function(t){return e[t]}),v=y?t.range(0,y[0]).concat(t.range(y[1]+1,g)):t.range(g),A=t.scale.linear().domain(u&&u.call(this,e,n)||[h,p]).range([a,0]),b=this.__chart__||t.scale.linear().domain([0,1/0]).range(A.range());this.__chart__=A;var _=r.selectAll("line.center").data(m?[m]:[]);_.enter().insert("line","rect").attr("class","center").attr("x1",i/2).attr("y1",function(t){return b(t[0])}).attr("x2",i/2).attr("y2",function(t){return b(t[1])}).style("opacity",1e-6).transition().duration(o).delay(l).style("opacity",1).attr("y1",function(t){return A(t[0])}).attr("y2",function(t){return A(t[1])}),_.transition().duration(o).delay(l).style("opacity",1).attr("x1",i/2).attr("x2",i/2).attr("y1",function(t){return A(t[0])}).attr("y2",function(t){return A(t[1])}),_.exit().transition().duration(o).delay(l).style("opacity",1e-6).attr("y1",function(t){return A(t[0])}).attr("y2",function(t){return A(t[1])}).remove();var D=r.selectAll("rect.box").data([x]);D.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return b(t[2])}).attr("width",i).attr("height",function(t){return b(t[0])-b(t[2])}).transition().duration(o).delay(l).attr("y",function(t){return A(t[2])}).attr("height",function(t){return A(t[0])-A(t[2])}),D.transition().duration(o).delay(l).attr("width",i).attr("y",function(t){return A(t[2])}).attr("height",function(t){return A(t[0])-A(t[2])});var k=r.selectAll("line.median").data([x[1]]);k.enter().append("line").attr("class","median").attr("x1",0).attr("y1",b).attr("x2",i).attr("y2",b).transition().duration(o).delay(l).attr("y1",A).attr("y2",A),k.transition().duration(o).delay(l).attr("x1",0).attr("x2",i).attr("y1",A).attr("y2",A);var C=r.selectAll("line.whisker").data(m||[]);C.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",b).attr("x2",i).attr("y2",b).style("opacity",1e-6).transition().duration(o).delay(l).attr("y1",A).attr("y2",A).style("opacity",1),C.transition().duration(o).delay(l).attr("x1",0).attr("x2",i).attr("y1",A).attr("y2",A).style("opacity",1),C.exit().transition().duration(o).delay(l).attr("y1",A).attr("y2",A).style("opacity",1e-6).remove();var L=r.selectAll("circle.outlier").data(v,Number);L.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",i/2).attr("cy",function(t){return b(e[t])}).style("opacity",1e-6).transition().duration(o).delay(l).attr("cy",function(t){return A(e[t])}).style("opacity",1),L.transition().duration(o).delay(l).attr("cx",i/2).attr("cy",function(t){return A(e[t])}).style("opacity",1),L.exit().transition().duration(o).delay(l).attr("cy",function(t){return A(e[t])}).style("opacity",1e-6).remove();var R=f||A.tickFormat(8),M=r.selectAll("text.box").data(x);M.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,e){return 1&e?i:0}).attr("y",b).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(R).transition().duration(o).delay(l).attr("y",A),M.transition().duration(o).delay(l).text(R).attr("x",function(t,e){return 1&e?i:0}).attr("y",A);var S=r.selectAll("text.whisker").data(m||[]);S.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",i).attr("y",b).text(R).style("opacity",1e-6).transition().duration(o).delay(l).attr("y",A).style("opacity",1),S.transition().duration(o).delay(l).text(R).attr("x",i).attr("y",A).style("opacity",1),S.exit().transition().duration(o).delay(l).attr("y",A).style("opacity",1e-6).remove()}),t.timer.flush()}var i=1,a=1,o=0,l=0,u=null,s=Number,c=e,d=n,f=null;return r.width=function(t){return arguments.length?(i=t,r):i},r.height=function(t){return arguments.length?(a=t,r):a},r.tickFormat=function(t){return arguments.length?(f=t,r):f},r.duration=function(t){return arguments.length?(o=t,r):o},r.domain=function(e){return arguments.length?(u=null===e?e:t.functor(e),r):u},r.value=function(t){return arguments.length?(s=t,r):s},r.whiskers=function(t){return arguments.length?(c=t,r):c},r.quartiles=function(t){return arguments.length?(d=t,r):d},r}}(),n.boxPlot=function(e,r){function i(t){t.enter().append("g").attr("class","box").attr("transform",f).call(s).on("click",function(t){l.filter(l.keyAccessor()(t)),l.redrawGroup()})}function a(e){n.transition(e,l.transitionDuration(),l.transitionDelay()).attr("transform",f).call(s).each(function(){t.select(this).select("rect.box").attr("fill",l.getColor)})}function o(t){t.exit().remove().call(s)}var l=n.coordinateGridMixin({}),u=function(t){return function(e){var n=e.quartiles[0],r=e.quartiles[2],i=(r-n)*t,a=-1,o=e.length;do{++a}while(e[a]<n-i);do{--o}while(e[o]>r+i);return[a,o]}}(1.5),s=t.box(),c=null,d=function(t,e){return l.isOrdinal()?l.x().rangeBand():t/(1+l.boxPadding())/e};l.yAxisPadding(12),l.x(t.scale.ordinal()),l.xUnits(n.units.ordinal),l.data(function(t){return t.all().map(function(t){return t.map=function(e){return e.call(t,t)},t}).filter(function(t){return 0!==l.valueAccessor()(t).length})}),l.boxPadding=l._rangeBandPadding,l.boxPadding(.8),l.outerPadding=l._outerRangeBandPadding,l.outerPadding(.5),l.boxWidth=function(e){return arguments.length?(d=t.functor(e),l):d};var f=function(t,e){return"translate("+l.x()(l.keyAccessor()(t,e))+", 0)"};return l._preprocessData=function(){l.elasticX()&&l.x().domain([])},l.plotData=function(){var t=d(l.effectiveWidth(),l.xUnitCount());s.whiskers(u).width(t).height(l.effectiveHeight()).value(l.valueAccessor()).domain(l.y().domain()).duration(l.transitionDuration()).tickFormat(c);var e=l.chartBodyG().selectAll("g.box").data(l.data(),l.keyAccessor());i(e),a(e),o(e),l.fadeDeselectedArea()},l.fadeDeselectedArea=function(){if(l.hasFilter())if(l.isOrdinal())l.g().selectAll("g.box").each(function(t){l.isSelectedNode(t)?l.highlightSelected(this):l.fadeDeselected(this)});else{var t=l.brush().extent(),e=t[0],n=t[1],r=l.keyAccessor();l.g().selectAll("g.box").each(function(t){var i=r(t);i<e||i>=n?l.fadeDeselected(this):l.highlightSelected(this)})}else l.g().selectAll("g.box").each(function(){l.resetHighlight(this)})},l.isSelectedNode=function(t){return l.hasFilter(l.keyAccessor()(t))},l.yAxisMin=function(){var e=t.min(l.data(),function(e){return t.min(l.valueAccessor()(e))});return n.utils.subtract(e,l.yAxisPadding())},l.yAxisMax=function(){var e=t.max(l.data(),function(e){return t.max(l.valueAccessor()(e))});return n.utils.add(e,l.yAxisPadding())},l.tickFormat=function(t){return arguments.length?(c=t,l):c},l.anchor(e,r)},n.selectMenu=function(e,r){function i(){var t=l.selectAll("option."+u).data(s.data(),function(t){return s.keyAccessor()(t)});return t.enter().append("option").classed(u,!0).attr("value",function(t){return s.keyAccessor()(t)}),t.text(s.title()),t.exit().remove(),l.selectAll("option."+u).sort(h),l.on("change",a),t}function a(e,n){var r,i=t.event.target;1===(r=i.selectedOptions?Array.prototype.slice.call(i.selectedOptions).map(function(t){return t.value}):[].slice.call(t.event.target.options).filter(function(t){return t.selected}).map(function(t){return t.value})).length&&""===r[0]?r=f||null:d||1!==r.length||(r=r[0]),s.onChange(r)}function o(){d?l.attr("multiple",!0):l.attr("multiple",null),null!==g?l.attr("size",g):l.attr("size",null)}var l,u="dc-select-option",s=n.baseMixin({}),c="Select all",d=!1,f=null,g=null,h=function(t,e){return s.keyAccessor()(t)>s.keyAccessor()(e)?1:s.keyAccessor()(e)>s.keyAccessor()(t)?-1:0},p=function(t){return s.valueAccessor()(t)>0};return s.data(function(t){return t.all().filter(p)}),s._doRender=function(){return s.select("select").remove(),(l=s.root().append("select").classed("dc-select-menu",!0)).append("option").text(c).attr("value",""),s._doRedraw(),s},s._doRedraw=function(){return o(),i(),s.hasFilter()&&d?l.selectAll("option").property("selected",function(t){return t&&s.filters().indexOf(String(s.keyAccessor()(t)))>=0}):s.hasFilter()?l.property("value",s.filter()):l.property("value",""),s},s.onChange=function(t){t&&d?s.replaceFilter([t]):t?s.replaceFilter(t):s.filterAll(),n.events.trigger(function(){s.redrawGroup()})},s.order=function(t){return arguments.length?(h=t,s):h},s.promptText=function(t){return arguments.length?(c=t,s):c},s.filterDisplayed=function(t){return arguments.length?(p=t,s):p},s.multiple=function(t){return arguments.length?(d=t,s):d},s.promptValue=function(t){return arguments.length?(f=t,s):f},s.numberVisible=function(t){return arguments.length?(g=t,s):g},s.size=n.logger.deprecate(s.numberVisible,"selectMenu.size is ambiguous - use numberVisible instead"),s.anchor(e,r)},n.abstractBubbleChart=n.bubbleMixin,n.baseChart=n.baseMixin,n.capped=n.capMixin,n.colorChart=n.colorMixin,n.coordinateGridChart=n.coordinateGridMixin,n.marginable=n.marginMixin,n.stackableChart=n.stackMixin,n.d3=t,n.crossfilter=e,n}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],t);else if("object"==typeof module&&module.exports){var e=require("d3"),n=require("crossfilter2");"function"!=typeof n&&(n=n.crossfilter),module.exports=t(e,n)}else this.dc=t(d3,crossfilter)}();